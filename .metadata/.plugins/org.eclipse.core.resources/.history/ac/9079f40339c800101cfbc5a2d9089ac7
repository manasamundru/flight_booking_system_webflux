package com.flightapp.services;

import org.springframework.beans.factory.annotation.Autowired;

import com.flightapp.entities.Flights;
import com.flightapp.repositories.AirlineRepository;
import com.flightapp.repositories.FlightRepository;

import reactor.core.publisher.Mono;
public class FlightService {
	@Autowired
	 private  FlightRepository repo;
	 private  AirlineRepository airlineRepo;
	 public Mono<String> addInventory(Flights flight) {

		    return airlineRepo.findById(flight.getAirlineId())
		            .switchIfEmpty(Mono.error(new RuntimeException("Airline not found: " + flight.getAirlineId())))
		            .flatMap(a -> repo.save(flight)) 
		            .map(saved -> saved.getId());    
		}
}
